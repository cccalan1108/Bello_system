{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-mqPK0vNN.js","sources":["../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue","../src/composables/useBLinkHelper.ts","../src/utils/isLink.ts"],"sourcesContent":["import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    v-bind=\"computedSpecificProps\"\n    :class=\"computedClasses\"\n    :target=\"props.target\"\n    :href=\"link?.href.value || computedHref\"\n    :rel=\"computedRel\"\n    :tabindex=\"computedTabIndex\"\n    :aria-disabled=\"props.disabled ? true : null\"\n    @click=\"\n      (e: MouseEvent) => {\n        clicked(e)\n        link?.navigate(e)\n      }\n    \"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, inject, useAttrs} from 'vue'\nimport {useBLinkTagResolver} from '../../composables/useBLinkHelper'\n\nconst defaultActiveClass = 'active'\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  noPrefetch: undefined,\n  prefetchOn: undefined,\n  noRel: false,\n  prefetchedClass: undefined,\n  prefetch: undefined,\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\n\nconst emit = defineEmits<{\n  click: [value: MouseEvent]\n}>()\n\nconst attrs = useAttrs()\nconst {computedHref, tag, link, isNuxtLink, isRouterLink, linkProps} = useBLinkTagResolver(\n  computed(() => ({\n    routerComponentName: props.routerComponentName,\n    disabled: props.disabled,\n    to: props.to,\n    replace: props.replace,\n    href: props.href,\n  }))\n)\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  attrs.class,\n  computedLinkClasses.value,\n  {\n    [defaultActiveClass]: props.active,\n    [props.activeClass]: link?.isActive.value || false,\n    [props.exactActiveClass]: link?.isExactActive.value || false,\n    'stretched-link': props.stretched === true,\n  },\n])\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.autoClose?.value === true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n\nconst computedRel = computed(() =>\n  props.target === '_blank' ? (!props.rel && props.noRel ? 'noopener' : props.rel) : undefined\n)\nconst computedTabIndex = computed(() =>\n  props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex\n)\n\nconst nuxtSpecificProps = computed(() => ({\n  prefetch: props.prefetch,\n  noPrefetch: props.noPrefetch,\n  prefetchOn: props.prefetchOn,\n  prefetchedClass: props.prefetchedClass,\n  ...linkProps.value,\n}))\nconst computedSpecificProps = computed(() => ({\n  ...(isNuxtLink.value ? nuxtSpecificProps.value : undefined),\n  ...(isRouterLink.value ? linkProps.value : undefined),\n}))\n</script>\n","import {\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  readonly,\n  resolveDynamicComponent,\n  toRef,\n} from 'vue'\nimport {isLink} from '../utils/isLink'\nimport {pick} from '../utils/object'\nimport type {RouteLocationRaw, RouterLink} from 'vue-router'\n\nexport const useBLinkHelper = <\n  T extends Record<string, unknown>,\n  const B extends ReadonlyArray<PropertyKey>,\n>(\n  props: MaybeRefOrGetter<T>,\n  pickProps?: MaybeRefOrGetter<B | (keyof T)[]>\n) => {\n  const pickPropsResolved = readonly(toRef(pickProps))\n  const resolvedProps = readonly(toRef(props))\n\n  const computedLink = computed(() => isLink(resolvedProps.value))\n  const computedLinkProps = computed(() =>\n    computedLink.value\n      ? pick(\n          resolvedProps.value,\n          pickPropsResolved.value ?? [\n            'active',\n            'activeClass',\n            'append',\n            'href',\n            'rel',\n            'replace',\n            'routerComponentName',\n            'target',\n            'to',\n            'variant',\n            'opacity',\n            'opacityHover',\n            'underlineVariant',\n            'underlineOffset',\n            'underlineOffsetHover',\n            'underlineOpacity',\n            'underlineOpacityHover',\n          ]\n        )\n      : {}\n  )\n\n  return {computedLink, computedLinkProps}\n}\n\nexport const useBLinkTagResolver = (\n  props: MaybeRefOrGetter<{\n    routerComponentName: string\n    disabled: boolean\n    to: RouteLocationRaw | undefined\n    href: string | undefined\n    replace: boolean\n  }>\n) => {\n  const instance = getCurrentInstance()\n  const router = instance?.appContext.app.config.globalProperties.$router\n  const route = instance?.appContext.app.config.globalProperties.$route\n  const RouterLinkComponent = resolveDynamicComponent('RouterLink') as typeof RouterLink | string\n  const useLink = typeof RouterLinkComponent === 'string' ? null : RouterLinkComponent.useLink\n  const resolvedProps = toRef(props)\n\n  const resolvedTo = toRef(() => resolvedProps.value.to || '')\n  const resolvedReplace = toRef(() => resolvedProps.value.replace)\n  const linkProps = computed(() => ({\n    to: resolvedTo.value,\n    replace: resolvedReplace.value,\n  }))\n\n  const link = useLink?.({\n    to: resolvedTo,\n    replace: resolvedReplace,\n  })\n\n  const routerName = computed(() =>\n    resolvedProps.value.routerComponentName\n      .split('-')\n      .map((e) => e.charAt(0).toUpperCase() + e.slice(1))\n      .join('')\n  )\n\n  const tag = computed(() => {\n    const hasRouter = instance?.appContext.app.component(routerName.value) !== undefined\n    if (!hasRouter || resolvedProps.value.disabled || !resolvedProps.value.to) {\n      return 'a'\n    }\n    return resolvedProps.value.routerComponentName\n  })\n\n  const computedHref = computed(() => {\n    const toFallback = '#'\n    if (resolvedProps.value.href) return resolvedProps.value.href\n\n    if (typeof resolvedProps.value.to === 'string') return resolvedProps.value.to || toFallback\n\n    // Stabilize the `to` prop for the callback functions\n    const {to: stableTo} = resolvedProps.value\n\n    if (stableTo !== undefined && 'path' in stableTo) {\n      const path = stableTo.path || ''\n      const query = stableTo.query\n        ? `?${Object.keys(stableTo.query)\n            .map((e) => `${e}=${stableTo.query?.[e]}`)\n            .join('=')}`\n        : ''\n      const hash =\n        !stableTo.hash || stableTo.hash.charAt(0) === '#'\n          ? stableTo.hash || ''\n          : `#${stableTo.hash}`\n      return `${path}${query}${hash}` || toFallback\n    }\n    // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n    return toFallback\n  })\n\n  return {\n    tag,\n    isRouterLink: computed(() => tag.value === 'router-link'),\n    isNuxtLink: computed(() => tag.value === 'nuxt-link'),\n    computedHref,\n    routerName,\n    router,\n    route,\n    link,\n    linkProps,\n  }\n}\n","import type {RouteLocationRaw} from 'vue-router'\n\nexport const isLink = (props: Readonly<{href?: string; to?: RouteLocationRaw}>): boolean =>\n  !!(props.href || props.to)\n"],"names":["useLinkClasses","linkProps","computed","props","toValue","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon","defaultActiveClass","_props","__props","useDefaults","emit","__emit","attrs","useAttrs","computedHref","tag","link","isNuxtLink","isRouterLink","instance","getCurrentInstance","router","appContext","app","config","globalProperties","$router","route","$route","RouterLinkComponent","resolveDynamicComponent","useLink","resolvedProps","toRef","resolvedTo","value","to","resolvedReplace","replace","routerName","routerComponentName","split","map","e","charAt","toUpperCase","slice","join","component","disabled","href","stableTo","path","query","Object","keys","_a","hash","useBLinkTagResolver","collapseData","inject","collapseInjectionKey","navbarData","navbarInjectionKey","linkValueClasses","computedClasses","class","computedLinkClasses","active","activeClass","isActive","exactActiveClass","isExactActive","stretched","computedRel","target","rel","noRel","computedTabIndex","tabindex","nuxtSpecificProps","prefetch","noPrefetch","prefetchOn","prefetchedClass","computedSpecificProps","preventDefault","stopImmediatePropagation","isNav","_b","autoClose","_c","hide","call","pickProps","pickPropsResolved","readonly","computedLink","isLink","computedLinkProps","pick"],"mappings":"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"}